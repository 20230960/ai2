<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>å•†å“è¯„è®ºè¯„ä¼°ä»»åŠ¡</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* ========== åŸºæœ¬å¸ƒå±€ï¼ˆç•™ç™½å‹ç¼©ç‰ˆï¼‰ ========== */
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans SC", sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f3f4f6;
      color: #111827;
    }

    .page-wrapper {
      max-width: 1100px;
      margin: 12px auto;
      padding: 8px 12px;
    }

    h1 {
      font-size: 20px;
      margin: 0 0 2px 0;
    }

    .subtitle {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 10px;
    }

    .layout {
      display: grid;
      grid-template-columns: 1fr 1.5fr;
      gap: 10px;
    }

    @media (max-width: 900px) {
      .layout { grid-template-columns: 1fr; }
    }

    .card {
      background: #ffffff;
      border-radius: 10px;
      padding: 12px 14px;
      box-shadow: 0 6px 16px rgba(15, 23, 42, 0.06);
    }

    .card-header {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .card-header span.badge {
      font-size: 11px;
      padding: 2px 7px;
      border-radius: 999px;
      background-color: #eef2ff;
      color: #4338ca;
    }

    /* ========== å•†å“ä¿¡æ¯åŒº ========== */
    .product-wrapper {
      display: grid;
      grid-template-columns: 110px minmax(0, 1fr);
      gap: 10px;
      align-items: flex-start;
    }

    .product-image {
      width: 110px;
      height: 110px;
      border-radius: 10px;
      background: linear-gradient(135deg, #e0f2fe, #dbeafe);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 38px;
    }

    .product-meta h2 {
      font-size: 16px;
      margin: 0 0 4px 0;
    }

    .product-meta .brand {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 6px;
    }

    .rating-row {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 6px;
      font-size: 12px;
    }

    .stars {
      color: #fbbf24;
      letter-spacing: 1px;
    }

    .price-row {
      font-size: 17px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .price-row span.old {
      font-size: 12px;
      color: #9ca3af;
      text-decoration: line-through;
      margin-left: 6px;
    }

    .tag-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 11px;
      margin-bottom: 4px;
    }

    .pill {
      padding: 2px 7px;
      border-radius: 999px;
      background-color: #e5e7eb;
      color: #374151;
    }

    .pill-green {
      background-color: #dcfce7;
      color: #166534;
    }

    .pill-blue {
      background-color: #dbeafe;
      color: #1d4ed8;
    }

    .product-copy {
      font-size: 13px;
      color: #4b5563;
      line-height: 1.4;
      margin-top: 4px;
    }

    /* ========== æ§ä»¶åŒº ========== */
    .controls-wrapper {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 8px;
    }

    .control-group {
      border-radius: 8px;
      border: 1px solid #e5e7eb;
      padding: 6px 8px;
      background-color: #f9fafb;
    }

    .control-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .control-title span.sub {
      font-size: 11px;
      font-weight: 400;
      color: #6b7280;
    }

    .slider-row {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
    }

    .slider-row input[type="range"] { flex: 1; }

    .slider-labels {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      color: #6b7280;
      margin-top: 2px;
    }

    .dimensions-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 12px;
    }

    .dimensions-row label {
      display: flex;
      align-items: center;
      gap: 4px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #ffffff;
      cursor: pointer;
    }

    .dimensions-row input[type="checkbox"] { margin: 0; }

    /* ========== ä¿ƒé”€å€’è®¡æ—¶åŒº ========== */
    .promo-timer-wrapper {
      background: #ffffff;
      border-radius: 10px;
      padding: 12px 14px;
      box-shadow: 0 6px 16px rgba(15, 23, 42, 0.06);
      margin-bottom: 12px;
    }

    .promo-timer {
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      color: #ef4444;
    }

    /* ========== æ‘˜è¦æ˜¾ç¤ºåŒº ========== */
    .summary-box {
      border-radius: 8px;
      border: 1px solid #e5e7eb;
      padding: 8px 10px;
      background-color: #ffffff;
      font-size: 13px;
      line-height: 1.5;
      max-height: 220px;
      overflow-y: auto;
    }

    .summary-box p { margin: 3px 0; }
    .summary-box p strong { color: #111827; }

    .summary-meta {
      font-size: 11px;
      color: #9ca3af;
      margin-top: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .summary-meta span.dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background-color: #22c55e;
      display: inline-block;
      margin-right: 4px;
    }

    .summary-meta .source {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .summary-meta .count { font-style: italic; }

    /* ========== åº•éƒ¨è¯´æ˜ ========== */
    .footer-note {
      margin-top: 12px;
      font-size: 12px;
      color: #6b7280;
      line-height: 1.5;
    }

    code {
      font-size: 11px;
      background-color: #e5e7eb;
      padding: 2px 4px;
      border-radius: 4px;
    }

    /* ========== â€œå¿…é¡»äº’åŠ¨ä¸€æ¬¡æ‰å¯ç»§ç»­â€ æŒ‰é’®åŒº ========== */
    .next-wrapper{
      margin-top: 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .next-hint{
      font-size: 12px;
      color: #6b7280;
    }

    .next-btn{
      border: none;
      border-radius: 10px;
      padding: 10px 14px;
      font-size: 13px;
      font-weight: 600;
      background: #111827;
      color: #ffffff;
      cursor: pointer;
    }

    .next-btn:disabled{
      background: #9ca3af;
      cursor: not-allowed;
      opacity: 0.85;
    }
  </style>
</head>

<body>
  <div class="page-wrapper">
    <h1>å•†å“è¯„è®ºè¯„ä¼°ä»»åŠ¡</h1>
    <div class="subtitle">
      è¯·é˜…è¯»ä¸‹æ–¹å•†å“ä¿¡æ¯å’Œ <strong>AI ç”Ÿæˆçš„è¯„è®ºæ‘˜è¦</strong>ï¼Œå¹¶æ ¹æ®ä½ çš„åˆ¤æ–­å®Œæˆåç»­é—®å·ã€‚æœ¬é¡µé¢ä¸ºå®éªŒç•Œé¢åŸå‹ï¼Œä»…ç”¨äºç ”ç©¶ç›®çš„ã€‚
    </div>

    <div class="layout">
      <!-- å·¦ä¾§ï¼šå•†å“ä¿¡æ¯ä¸å€’è®¡æ—¶ -->
      <div>
        <div class="card">
          <div class="card-header">
            <span>å•†å“ä¿¡æ¯</span>
            <span class="badge">æ¨¡æ‹Ÿé¡µé¢ Â· ä»…ç”¨äºå®éªŒ</span>
          </div>

          <div class="product-wrapper">
            <div class="product-image">ğŸ§</div>
            <div class="product-meta">
              <h2>NovaSound AirLite æ— çº¿å¤´æˆ´å¼è€³æœº</h2>
              <div class="brand">å“ç‰Œï¼šNovaSound Â· ç±»å‹ï¼šæ— çº¿å¤´æˆ´å¼è€³æœº</div>

              <div class="rating-row">
                <span class="stars">â˜…â˜…â˜…â˜…â˜…</span>
                <span>4.6 / 5 Â· å…± 256 æ¡è¯„åˆ†</span>
              </div>

              <div class="price-row">
                <span id="currentPrice">ï¿¥599</span>
                <span id="originalPrice" class="old">ï¿¥799</span>
              </div>

              <div class="tag-row">
                <span class="pill pill-green">7 å¤©æ— ç†ç”±é€€è´§</span>
                <span class="pill pill-blue">æ”¯æŒ AI è¯„è®ºæ‘˜è¦</span>
                <span class="pill">è“ç‰™ 5.3</span>
                <span class="pill">ç»­èˆªæœ€é•¿çº¦ 40 å°æ—¶</span>
              </div>

              <div class="product-copy">
                è¿™æ¬¾æ— çº¿å¤´æˆ´å¼è€³æœºé€‚åˆæ—¥å¸¸é€šå‹¤ã€å­¦ä¹ å’ŒåŠå…¬åœºæ™¯ä½¿ç”¨ã€‚ä¸‹æ–¹å±•ç¤ºäº†åŸºäºé¡¾å®¢çœŸå®è¯„ä»·ç”Ÿæˆçš„
                AI è¯„è®ºæ‘˜è¦ï¼Œå¸®åŠ©ä½ å¿«é€Ÿäº†è§£å…¶ä»–è´­ä¹°è€…å¯¹è¯¥å•†å“çš„çœ‹æ³•ã€‚
              </div>
            </div>
          </div>
        </div>

        <!-- ä¿ƒé”€å€’è®¡æ—¶ -->
        <div class="promo-timer-wrapper card">
          <div class="card-header">
            <span>ä¿ƒé”€å€’è®¡æ—¶</span>
          </div>
          <div class="promo-timer">
            <p id="countdownTimer" style="font-size: 18px; font-weight: bold;">00:05:00</p>
          </div>
        </div>
      </div>

      <!-- å³ä¾§ï¼šAI æ‘˜è¦ä¸äº¤äº’æ§ä»¶ -->
      <div class="card">
        <div class="card-header">
          <span>äº¤äº’å¼ AI è¯„è®ºæ‘˜è¦</span>
        </div>

        <div class="controls-wrapper">
          <!-- æ‘˜è¦é•¿åº¦ -->
          <div class="control-group">
            <div class="control-title">
              æ‘˜è¦é•¿åº¦
              <span class="sub" id="lengthLabelText">ï¼ˆä¸­ç­‰ï¼‰</span>
            </div>
            <div class="slider-row">
              <span style="font-size:11px;">çŸ­</span>
              <input type="range" id="lengthSlider" min="1" max="3" value="2" />
              <span style="font-size:11px;">é•¿</span>
            </div>
            <div class="slider-labels">
              <span>1 = ç®€çŸ­</span>
              <span>2 = ä¸­ç­‰</span>
              <span>3 = è¾ƒé•¿</span>
            </div>
          </div>

          <!-- å…³æ³¨ç»´åº¦ -->
          <div class="control-group">
            <div class="control-title">
              å…³æ³¨ç»´åº¦
              <span class="sub">è¯·é€‰æ‹©ä½ å¸Œæœ›åœ¨æ‘˜è¦ä¸­ä¼˜å…ˆçœ‹åˆ°çš„è¯„ä»·æ–¹é¢</span>
            </div>
            <div class="dimensions-row">
              <label><input type="checkbox" value="quality" checked /><span>éŸ³è´¨</span></label>
              <label><input type="checkbox" value="battery" checked /><span>ç»­èˆª</span></label>
              <label><input type="checkbox" value="comfort" checked /><span>ä½©æˆ´èˆ’é€‚åº¦</span></label>
              <label><input type="checkbox" value="design" checked /><span>å¤–è§‚ä¸åšå·¥</span></label>
              <label><input type="checkbox" value="service" checked /><span>å®¢æœä¸ç‰©æµ</span></label>
            </div>
          </div>
        </div>

        <!-- æ‘˜è¦æ˜¾ç¤ºæ¡† -->
        <div class="summary-box" id="summaryText"></div>

        <div class="summary-meta">
          <div class="source">
            <span class="dot"></span>
            <span id="sourceLabel">åŸºäº 256 æ¡é¡¾å®¢è¯„è®ºç”Ÿæˆçš„ AI æ‘˜è¦</span>
          </div>
          <div class="count" id="lengthMeta">çº¦ 0 å¥ Â· å·²é€‰æ‹© 0 ä¸ªç»´åº¦</div>
        </div>
      </div>
    </div>

    <div class="footer-note">
      å®éªŒæç¤ºï¼šæœ¬é¡µé¢ä¼šå°†ä½ çš„æ‰€æœ‰äº¤äº’ï¼ˆæ‹–åŠ¨æ»‘æ¡ã€å‹¾é€‰ç»´åº¦ï¼‰è®°å½•åœ¨
      <code>window.interactionLog</code>
      ä¸­ï¼ˆå¯åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹ï¼‰ï¼Œç”¨äºåç»­æ•°æ®åˆ†æã€‚
    </div>

    <!-- âœ… å¿…é¡»äº’åŠ¨ä¸€æ¬¡æ‰å¯ç»§ç»­ -->
    <div class="next-wrapper">
      <div class="next-hint" id="nextHint">è¯·å…ˆè¿›è¡Œè‡³å°‘ä¸€æ¬¡äº¤äº’ï¼ˆè°ƒæ•´æ‘˜è¦é•¿åº¦æˆ–å‹¾é€‰ç»´åº¦ï¼‰åå†ç»§ç»­ã€‚</div>
      <button class="next-btn" id="nextBtn" disabled>ä¸‹ä¸€æ­¥</button>
    </div>
  </div>

  <script>
    // ========== ç»´åº¦æ ‡ç­¾ï¼ˆä¸­æ–‡ï¼‰ ==========
    const dimensionLabels = {
      quality: "éŸ³è´¨",
      battery: "ç»­èˆª",
      comfort: "ä½©æˆ´èˆ’é€‚åº¦",
      design: "å¤–è§‚ä¸åšå·¥",
      service: "å®¢æœä¸ç‰©æµ",
    };

    // æ¯ä¸ªç»´åº¦ä¸‹é¢„ç½®ä¸‰å±‚ç»†èŠ‚ï¼ˆçŸ­/ä¸­/é•¿ï¼‰
    const summaryData = {
      quality: [
        "è®¸å¤šé¡¾å®¢è®¤ä¸ºè¿™æ¬¾è€³æœºçš„æ•´ä½“éŸ³è´¨æ¸…æ™°ã€å‡è¡¡ï¼Œè¶³ä»¥æ»¡è¶³æ—¥å¸¸å¬æ­Œã€è¿½å‰§å’Œçº¿ä¸Šä¼šè®®çš„éœ€è¦ã€‚",
        "éƒ¨åˆ†ç”¨æˆ·è¡¨ç¤ºï¼Œä¸ä»·æ ¼æ›´é«˜çš„å“ç‰Œç›¸æ¯”ï¼Œè¿™æ¬¾è€³æœºçš„ä½é¢‘æœ‰åŠ›åº¦ä½†ä¸è¿‡åˆ†æŠ¢æˆï¼Œäººå£°è¡¨ç°è‡ªç„¶ï¼Œäººå£°å’ŒèƒŒæ™¯ä¹çš„åˆ†ç¦»åº¦æ¯”è¾ƒå¥½ã€‚",
        "å°‘æ•°å¯¹éŸ³è´¨è¾ƒæ•æ„Ÿçš„ç”¨æˆ·æåˆ°ï¼Œè™½ç„¶è°ˆä¸ä¸Šâ€œå‘çƒ§çº§â€ï¼Œä½†åœ¨ä¸åŒéŸ³ä¹ç±»å‹ï¼ˆæµè¡Œã€æ‘‡æ»šã€å¤å…¸ï¼‰ä»¥åŠè§†é¢‘é€šè¯åœºæ™¯ä¸‹è¡¨ç°éƒ½è¶…å‡ºé¢„æœŸã€‚"
      ],
      battery: [
        "å¤§å¤šæ•°ç”¨æˆ·åé¦ˆç”µæ± ç»­èˆªå¯ä»¥è½»æ¾åº”å¯¹é€šå‹¤å’Œæ—¥å¸¸åŠå…¬ï¼Œä¸€èˆ¬ä½¿ç”¨ä¸€ä¸¤å¤©ä¸éœ€è¦å……ç”µã€‚",
        "ä¸å°‘è¯„è®ºæåˆ°ï¼Œä¸­ç­‰å¼ºåº¦ä½¿ç”¨ï¼ˆæ¯å¤© 2â€“3 å°æ—¶å¬æ­Œæˆ–å¼€ä¼šï¼‰æ—¶ï¼Œä¸€æ¬¡å……ç”µå¯ä»¥ä½¿ç”¨å¥½å‡ å¤©ã€‚",
        "é‡åº¦ä½¿ç”¨è€…æ™®éæŠ¥å‘Šçº¦ 30â€“35 å°æ—¶çš„è¿ç»­æ’­æ”¾æ—¶é—´ï¼Œå¹¶è®¤ä¸ºå¿«å……åŠŸèƒ½åœ¨çŸ­æ—¶é—´è¡¥ç”µæ—¶éå¸¸å®ç”¨ï¼Œæ¯”å¦‚å‡ºé—¨å‰ä¸´æ—¶å……ç”µåå‡ åˆ†é’Ÿå³å¯åº”ä»˜ä¸€æ•´æ®µé€šå‹¤ã€‚"
      ],
      comfort: [
        "ç”¨æˆ·æ™®éè®¤ä¸ºè€³æœºæ•´ä½“é‡é‡è¾ƒè½»ï¼Œå¤¹å¤´æ„Ÿä¸å¼ºï¼Œé•¿æ—¶é—´ä½©æˆ´ä¹Ÿæ¯”è¾ƒèˆ’é€‚ã€‚",
        "å¾ˆå¤šè¯„è®ºç‰¹åˆ«æåˆ°è€³ç½©æ¯”è¾ƒæŸ”è½¯ï¼Œå¤´æ¢å¯è°ƒèŠ‚èŒƒå›´è¾ƒå¤§ï¼Œå¯ä»¥é€‚åº”ä¸åŒå¤´å‹å’Œå¤´å›´ã€‚",
        "å°‘éƒ¨åˆ†ä½©æˆ´çœ¼é•œçš„ç”¨æˆ·æåˆ°ï¼Œè¿ç»­ä½¿ç”¨æ•°å°æ—¶åè€³æœµä¼šç•¥æœ‰å‹è¿«æ„Ÿï¼Œä½†å¤§å¤šæ•°äººè®¤ä¸ºè¿™å±äºå¯ä»¥æ¥å—çš„èŒƒå›´ï¼Œå¹¶éæ˜æ˜¾ç¼ºç‚¹ã€‚"
      ],
      design: [
        "æ•´ä½“å¤–è§‚åç®€çº¦å•†åŠ¡é£ï¼Œé¢œè‰²ä½è°ƒï¼Œä¸ä¼šåœ¨åŠå…¬å®¤æˆ–å›¾ä¹¦é¦†æ˜¾å¾—çªå…€ã€‚",
        "ä¸å°‘ç”¨æˆ·å–œæ¬¢å®ƒçš„å“‘å…‰è´¨æ„Ÿï¼Œè®¤ä¸ºç›¸æ¯”é«˜äº®å¡‘æ–™æ›´ä¸å®¹æ˜“ç•™ä¸‹æŒ‡çº¹å’Œåˆ’ç—•ï¼Œçœ‹èµ·æ¥æ›´åŠ è€ç”¨ã€‚",
        "æœ‰ç”¨æˆ·å¸Œæœ›è€³æœºå¯ä»¥å®Œå…¨æŠ˜å ä»¥ä¾¿å‡ºè¡Œæºå¸¦ï¼Œä½†å¤§å¤šæ•°äººå¯¹éšæœºé™„é€çš„æ”¶çº³è¢‹å’Œæ•´ä½“åšå·¥ä»è¡¨ç¤ºæ»¡æ„ï¼Œè§‰å¾—ç»†èŠ‚æ¯”è¾ƒæ‰å®ã€‚"
      ],
      service: [
        "æ•´ä½“æ¥çœ‹ï¼Œç”¨æˆ·å¯¹ç‰©æµé€Ÿåº¦å’ŒåŒ…è£…ä¿æŠ¤çš„è¯„ä»·è¾ƒä¸ºæ­£é¢ï¼Œæ™®éè®¤ä¸ºå‘è´§åŠæ—¶ã€åŒ…è£…ç¨³å¦¥ã€‚",
        "éƒ¨åˆ†è¯„è®ºæåˆ°ï¼Œå¦‚æœå‡ºç°è´¨é‡é—®é¢˜æˆ–ä¸ªäººä¸æ»¡æ„ï¼Œé€€æ¢è´§æµç¨‹ç›¸å¯¹é¡ºç•…ï¼Œå®¢æœå“åº”è¿˜ç®—åŠæ—¶ã€‚",
        "ä¹Ÿæœ‰ä¸ªåˆ«ç”¨æˆ·æåˆ°ï¼Œåœ¨å’¨è¯¢è¾ƒä¸ºç»†è‡´çš„é—®é¢˜æ—¶å®¢æœå›å¤ç•¥æ…¢ï¼Œä½†æ€»ä½“ä¸Šå¤§å®¶å¯¹å”®åæœåŠ¡æ€åº¦å’Œè§£å†³æ•ˆç‡æŒè‚¯å®šè¯„ä»·ã€‚"
      ],
    };

    const lengthLabels = { 1: "ç®€çŸ­", 2: "ä¸­ç­‰", 3: "è¾ƒé•¿" };

    // ========== çŠ¶æ€ä¸äº¤äº’è®°å½• ==========
    const state = {
      lengthLevel: 2,
      selectedDimensions: new Set(["quality", "battery", "comfort", "design", "service"]),
    };

    // ç”¨äºå®éªŒæ•°æ®æ”¶é›†ï¼šè®°å½•æ‰€æœ‰äº¤äº’äº‹ä»¶
    window.interactionLog = [];

    function logInteraction(type, payload) {
      window.interactionLog.push({
        type,
        payload,
        ts: new Date().toISOString(),
      });
      console.log("[INTERACTION]", type, payload);
    }

    // ========== DOM å…ƒç´ å¼•ç”¨ ==========
    const summaryBox = document.getElementById("summaryText");
    const lengthSlider = document.getElementById("lengthSlider");
    const lengthLabelText = document.getElementById("lengthLabelText");
    const lengthMeta = document.getElementById("lengthMeta");
    const sourceLabel = document.getElementById("sourceLabel");
    const dimensionCheckboxes = document.querySelectorAll(".dimensions-row input[type='checkbox']");

    // ========== â€œå¿…é¡»äº’åŠ¨ä¸€æ¬¡â€é—¨æ§› ==========
    const nextBtn = document.getElementById("nextBtn");
    const nextHint = document.getElementById("nextHint");
    let hasInteracted = false;

    function unlockNext() {
      if (hasInteracted) return;
      hasInteracted = true;
      if (nextBtn) nextBtn.disabled = false;
      if (nextHint) nextHint.textContent = "å·²å®Œæˆäº¤äº’ï¼Œå¯ä»¥ç»§ç»­ã€‚";
    }

    // ========== æ¸²æŸ“æ‘˜è¦æ ¸å¿ƒå‡½æ•° ==========
    function renderSummary() {
      const level = state.lengthLevel;
      const dims = Array.from(state.selectedDimensions);

      // æ›´æ–°é•¿åº¦æ ‡ç­¾å’Œæ¥æºè¯´æ˜
      const label = lengthLabels[level];
      lengthLabelText.textContent = `ï¼ˆ${label}ï¼‰`;
      sourceLabel.textContent = "åŸºäº 256 æ¡é¡¾å®¢è¯„è®ºç”Ÿæˆçš„ AI æ‘˜è¦";

      if (dims.length === 0) {
        summaryBox.innerHTML = "<em>è¯·å…ˆåœ¨ä¸Šæ–¹å‹¾é€‰è‡³å°‘ä¸€ä¸ªå…³æ³¨ç»´åº¦ï¼Œä»¥ç”Ÿæˆæ‘˜è¦å†…å®¹ã€‚</em>";
        lengthMeta.textContent = "çº¦ 0 å¥ Â· å·²é€‰æ‹© 0 ä¸ªç»´åº¦";
        return;
      }

      const paragraphs = [];
      let totalSentences = 0;

      dims.forEach((dim) => {
        const textArr = summaryData[dim];
        if (!textArr) return;
        const sentences = textArr.slice(0, level);
        totalSentences += sentences.length;
        const dimLabel = dimensionLabels[dim];
        paragraphs.push(`<p><strong>${dimLabel}ï¼š</strong> ${sentences.join(" ")}</p>`);
      });

      summaryBox.innerHTML = paragraphs.join("");
      lengthMeta.textContent = `çº¦ ${totalSentences} å¥ Â· å·²é€‰æ‹© ${dims.length} ä¸ªç»´åº¦`;
    }

    // ========== äº‹ä»¶ç»‘å®š ==========
    // é•¿åº¦æ»‘æ¡
    lengthSlider.addEventListener("input", (e) => {
      unlockNext(); // âœ… ä»»æ„ä¸€æ¬¡äº¤äº’ç«‹å³è§£é”â€œä¸‹ä¸€æ­¥â€
      const newVal = parseInt(e.target.value, 10);
      state.lengthLevel = newVal;
      logInteraction("change_length", { lengthLevel: newVal });
      renderSummary();
    });

    // ç»´åº¦å‹¾é€‰
    dimensionCheckboxes.forEach((checkbox) => {
      checkbox.addEventListener("change", (e) => {
        unlockNext(); // âœ… ä»»æ„ä¸€æ¬¡äº¤äº’ç«‹å³è§£é”â€œä¸‹ä¸€æ­¥â€
        const dim = e.target.value;
        if (e.target.checked) state.selectedDimensions.add(dim);
        else state.selectedDimensions.delete(dim);

        logInteraction("toggle_dimension", { dimension: dim, checked: e.target.checked });
        renderSummary();
      });
    });

    // ä¸‹ä¸€æ­¥æŒ‰é’®è¡Œä¸ºï¼ˆè¯·æŒ‰ä½ çš„é—®å·å¹³å°æ›¿æ¢ï¼‰
    if (nextBtn) {
      nextBtn.addEventListener("click", () => {
  if (!hasInteracted) return;

  // âœ… ä¿å­˜äº¤äº’æ—¥å¿—åˆ° sessionStorageï¼Œè®© survey.html èƒ½è¯»å–
  sessionStorage.setItem("interactionLog", JSON.stringify(window.interactionLog || []));

  // âœ… ä¿å­˜æœ€ç»ˆçŠ¶æ€ï¼ˆå¯é€‰ä½†å¼ºçƒˆå»ºè®®ï¼‰
  sessionStorage.setItem("final_state", JSON.stringify({
    condition: "INTERACTIVE_NOPROMO",   // ä½ æŒ‰å®é™…æ¡ä»¶æ”¹
    interactive: true,
    promo: false,
    lengthLevel: state.lengthLevel,
    selectedDimensions: Array.from(state.selectedDimensions)
  }));

  // âœ… è®°å½•ç»“æŸæ—¶é—´ï¼ˆå¯é€‰ï¼‰
  sessionStorage.setItem("task_end_ts", new Date().toISOString());

  window.location.href = "survey.html";
});



    }

    // åˆå§‹æ¸²æŸ“
    renderSummary();
  </script>

  <script>
    // ========== ä¿ƒé”€å€’è®¡æ—¶é€»è¾‘ ==========
    function startCountdown(durationInSeconds) {
      let timer = durationInSeconds;
      const countdownDisplay = document.getElementById('countdownTimer');

      const interval = setInterval(function () {
        const hours = Math.floor(timer / 3600);
        const minutes = Math.floor((timer % 3600) / 60);
        const seconds = timer % 60;

        countdownDisplay.textContent =
          `${hours < 10 ? '0' + hours : hours}:${minutes < 10 ? '0' + minutes : minutes}:${seconds < 10 ? '0' + seconds : seconds}`;

        if (timer <= 0) {
          clearInterval(interval);
          countdownDisplay.textContent = 'ä¿ƒé”€ç»“æŸ';

          // ä¿®æ”¹ä»·æ ¼æ˜¾ç¤ºä¸ºåŸä»·
          document.getElementById('currentPrice').textContent = 'ï¿¥799';
          document.getElementById('originalPrice').style.display = 'none';
        } else {
          timer--;
        }
      }, 1000);
    }

    // å¯åŠ¨å€’è®¡æ—¶ï¼ˆè¿™é‡Œæ˜¯ 10 ç§’æ¼”ç¤ºï¼›æ­£å¼å®éªŒå¯æ”¹ä¸º 180/300 ç­‰ï¼‰
    startCountdown(10);
  </script>
</body>
</html>
